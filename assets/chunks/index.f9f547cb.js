import{_ as T,i as _,q as x,o as a,c as o,a as p,F as c,g as k,l as y,e as A,t as w,z as B,A as D,j as E,b as v,s as U,x as $,k as z,n as F,r as j}from"../app.20a46c54.js";const R={class:"pied-table-tr-header"},q=["align"],I=["onClick"],L=["onClick"],G=["onClick"],H=["align"],K=["align"],M=["align"],P=["align"],Q={name:"piedTable"},W=Object.assign(Q,{props:{data:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]},border:{type:Boolean,default:!1},rowSelectChange:{type:Function,default:()=>{}}},setup(S){const i=S,r=_([]);_("normal");const g=_([]);r.value=i.data.map(t=>({...t,choose:!1})),g.value=JSON.parse(JSON.stringify(r.value));const h=x(()=>r.value.every(t=>t.choose)),b=t=>{let s=[],l=JSON.parse(JSON.stringify(r.value));t&&l.forEach(e=>{e.choose=!0;let d=JSON.parse(JSON.stringify(e));delete d.choose,s.push(d)}),!t&&l.forEach(e=>{e.choose=!1}),r.value=l,i.rowSelectChange&&i.rowSelectChange(s)},C=()=>{let t=[],s=JSON.parse(JSON.stringify(r.value));s.forEach(l=>{let e=JSON.parse(JSON.stringify(l));e.choose&&(delete e.choose,t.push(e))}),r.value=s,i.rowSelectChange&&i.rowSelectChange(t)},u=(t,s)=>{switch(t){case"up":s.sortType="down",O(s.key);break;case"down":s.sortType="normal",V(s.key);break;case"normal":s.sortType="up",N(s.key);break}},N=t=>{r.value.sort(f(t,!0))},O=t=>{r.value.sort(f(t,!1))},V=t=>{r.value=JSON.parse(JSON.stringify(g.value))},f=(t,s)=>(l,e)=>s?l[t]-e[t]:e[t]-l[t];return(t,s)=>{const l=j("pied-checkbox");return a(),o("table",{class:F(["pied-table",[i.border?"pied-table-border":""]]),border:"0",cellspacing:"0",cellpadding:"0"},[p("thead",null,[p("tr",R,[(a(!0),o(c,null,k(i.columns,e=>(a(),o(c,{key:e.key},[e.select?(a(),o("td",{key:1,align:e.center,style:y({width:e.width})},[v(l,{modelValue:U(h),"onUpdate:modelValue":s[0]||(s[0]=d=>$(h)?h.value=d:null),onChange:b},null,8,["modelValue"])],12,H)):(a(),o("td",{key:0,align:e.center,style:y({width:e.width})},[A(w(e.title)+" ",1),B(p("span",null,[e.sortType==="up"?(a(),o("span",{key:0,class:"pied-icon-rise",onClick:d=>u("up",e)},null,8,I)):e.sortType==="down"?(a(),o("span",{key:1,class:"pied-icon-fall",onClick:d=>u("down",e)},null,8,L)):e.sortType!=="up"&&e.sortType!=="down"?(a(),o("span",{key:2,class:"pied-icon-reload",onClick:d=>u("normal",e)},null,8,G)):E("",!0)],512),[[D,e.sort]])],12,q))],64))),128))])]),p("tbody",null,[(a(!0),o(c,null,k(r.value,(e,d)=>(a(),o("tr",{class:"pied-table-tr-body",key:d},[(a(!0),o(c,null,k(i.columns,n=>(a(),o(c,{key:n.key},[n.select?(a(),o("td",{key:0,align:n.center,style:y({width:n.width})},[v(l,{modelValue:e.choose,"onUpdate:modelValue":J=>e.choose=J,onChange:C},null,8,["modelValue","onUpdate:modelValue"])],12,K)):n.format?(a(),o("td",{key:2,align:n.center},[z(t.$slots,"body",{column:n,record:e},void 0,!0)],8,P)):(a(),o("td",{key:1,align:n.center,style:y({width:n.width})},w(e[n.key]),13,M))],64))),128))]))),128))])],2)}}}),Y=T(W,[["__scopeId","data-v-aa87eecd"]]);export{Y as default};
